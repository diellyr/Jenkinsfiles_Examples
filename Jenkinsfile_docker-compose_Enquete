pipeline {
    agent any
    
    stages {
    
        
        
        stage('Download Aplicação') {
           steps {     
        git url: 'https://github.com/diellyr/enquete.git'
            }
        }
        
        stage('Descompactar Aplicação') {
            steps {
                sh 'tar -xvzf Enquete.tar.gz'
            }
        }
        
         stage('Stop e rm de containers') {
            steps {
                sh '''
                      docker stop httpd
                      docker rm httpd
                      docker stop node
                      docker rm node
                      docker stop mariadb
                      docker rm mariadb
                   '''
            }
        }
        
        stage('Iniciar Aplicação') {
            steps {
                sh '''
                    cd Enquete/compose
                    sudo nohup docker-compose up &
                   '''
            }
        }
        
        stage('Testar Aplicação') {
            steps {
                echo 'teste....'
            }
        }
    }
}
